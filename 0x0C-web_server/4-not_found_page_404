#!/usr/bin/env bash

if [ ! -x "$(command -v nginx)" ]; then
    sudo apt-get update
    sudo apt-get install -y nginx
fi

if ! grep -q "error_page 404 /404.html;" /etc/nginx/sites-available/default; then
    sudo sed -i '/server_name  localhost;/a\    error_page 404 /404.html;\n    location = /404.html {\n        internal;\n        root /usr/share/nginx/html;\n        echo "Ceci n'\''est pas une page";\n    }' /etc/nginx/sites-available/default
fi

if ! grep -q "error_page 404 /404.html;" /etc/nginx/conf.d/default.conf; then
    sudo sed -i '/server_name  localhost;/a\    error_page 404 /404.html;\n    location = /404.html {\n        internal;\n        root /usr/share/nginx/html;\n        echo "Ceci n'\''est pas une page";\n    }' /etc/nginx/conf.d/default.conf
fi

sudo service nginx restart

